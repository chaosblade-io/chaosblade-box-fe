# MicroGraph 演示指南

## 演示内容

### 初始界面

应用启动后，你会看到：

1. **顶部导航栏**
   - 左侧：MicroGraph 标题
   - 中间：集群选择器（默认：prod-k8s）
   - 右侧：命名空间选择器（默认：default）

2. **左侧边栏**（4 个标签页）
   - 📊 概览 - 显示统计信息
   - 🌳 域视图 - 按域和类型分组
   - 🔍 过滤器 - 多维度过滤
   - 📖 图例 - 节点和边的说明

3. **中间画布**
   - 显示 K8s 资源拓扑图
   - 包含 10 个节点和 12 条边

4. **底部工具栏**
   - 布局选择器
   - 缩放控制
   - 导出按钮

## 功能演示

### 1. 查看拓扑图

**默认显示的资源:**
- 1 个 Namespace (default)
- 1 个 Deployment (nginx-deployment)
- 1 个 ReplicaSet (nginx-rs)
- 3 个 Pod (nginx-pod-1, nginx-pod-2, nginx-pod-3)
- 1 个 Service (nginx-service)
- 1 个 ConfigMap (app-config)
- 1 个 Secret (app-secret)
- 1 个 PVC (data-pvc)

**关系展示:**
- Namespace 包含其他资源
- Deployment 管理 ReplicaSet
- ReplicaSet 创建 Pod
- Service 选择 Pod
- Pod 挂载 ConfigMap 和 Secret
- Pod 声明 PVC

### 2. 节点交互

#### 点击节点
1. 点击任意节点（如 nginx-pod-1）
2. 右侧会弹出详情面板
3. 查看节点的基本信息、标签、属性

#### 查看关系
1. 选中节点后，点击"关系"标签
2. 查看该节点的入边和出边
3. 了解节点与其他资源的关系

#### 查看 YAML
1. 选中节点后，点击"YAML"标签
2. 查看节点的完整数据结构
3. 可以复制 YAML 内容

#### 节点聚焦
1. 点击节点后，该节点及其相关节点会高亮
2. 其他节点会变暗
3. 点击画布空白处取消聚焦

### 3. 边交互

#### 点击边
1. 点击任意连接线（边）
2. 右侧显示边的详情
3. 查看关系类型、源节点、目标节点

#### 边的样式
- **绿色实线** - owns（拥有）
- **蓝色实线** - manages（管理）
- **紫色实线** - creates（创建）
- **橙色实线** - selects（选择）
- **青色虚线** - mounts（挂载）
- **粉色虚线** - claims（声明）

### 4. 布局切换

点击底部工具栏的布局选择器，尝试不同的布局：

1. **力导向布局** (默认)
   - 节点自动分布
   - 关系紧密的节点靠近

2. **层次布局**
   - 从上到下的层次结构
   - 适合查看依赖关系

3. **圆形布局**
   - 节点排列成圆形
   - 适合查看整体结构

4. **网格布局**
   - 节点排列成网格
   - 整齐有序

5. **辐射布局**
   - 从中心向外辐射
   - 适合查看核心资源

6. **同心圆布局**
   - 多层同心圆
   - 按层级展示

### 5. 缩放和平移

#### 缩放
- **鼠标滚轮**: 向上滚动放大，向下滚动缩小
- **工具栏按钮**: 点击 + 放大，点击 - 缩小
- **适应画布**: 点击 ⊡ 按钮自动适应

#### 平移
- **拖拽画布**: 按住鼠标左键拖动画布
- **拖拽节点**: 按住节点拖动调整位置

### 6. 过滤功能

切换到左侧边栏的"过滤器"标签：

#### 按域过滤
- 勾选/取消勾选域（基础设施、工作负载、网络、配置）
- 只显示选中域的资源

#### 按状态过滤
- 勾选/取消勾选状态（运行中、警告、错误、等待中、已终止）
- 只显示选中状态的资源

#### 按命名空间过滤
- 选择一个或多个命名空间
- 只显示选中命名空间的资源

#### 文本搜索
- 在搜索框输入关键词
- 实时过滤匹配的资源

### 7. 统计信息

切换到左侧边栏的"概览"标签：

#### 总体统计
- 节点总数: 10
- 边总数: 12

#### 状态分布
- 运行中: 7
- 警告: 2
- 错误: 1

#### 域分布
- 基础设施: 1
- 工作负载: 5
- 网络: 1
- 配置: 3

#### 命名空间分布
- default: 10

### 8. 域视图

切换到左侧边栏的"域视图"标签：

查看按域和资源类型分组的树形结构：
- 📦 基础设施
  - Namespace (1)
- 🚀 工作负载
  - Deployment (1)
  - ReplicaSet (1)
  - Pod (3)
- 🌐 网络
  - Service (1)
- ⚙️ 配置
  - ConfigMap (1)
  - Secret (1)
  - PVC (1)

### 9. 图例

切换到左侧边栏的"图例"标签：

#### 节点类型
查看所有 13 种资源类型的图标和颜色

#### 关系类型
查看所有 9 种关系类型的样式和说明

#### 状态标识
查看所有 5 种状态的颜色和含义

### 10. 导出功能

点击底部工具栏的"导出"按钮：

1. **导出为 PNG**
   - 导出当前视图为图片
   - 适合文档和报告

2. **导出为 SVG**
   - 导出为矢量图
   - 适合高质量打印

3. **导出为 JSON**
   - 导出图数据
   - 适合数据分析

## 演示场景

### 场景 1: 查看 Pod 的完整关系

1. 点击任意 Pod 节点（如 nginx-pod-1）
2. 查看详情面板的"关系"标签
3. 观察 Pod 的入边和出边：
   - 入边: ReplicaSet 创建 Pod
   - 出边: Pod 挂载 ConfigMap、Secret、PVC

### 场景 2: 追踪 Deployment 到 Pod 的路径

1. 点击 Deployment 节点
2. 观察高亮的路径：
   - Deployment → ReplicaSet → Pod
3. 切换到层次布局查看更清晰的层级关系

### 场景 3: 查看 Service 选择的 Pod

1. 点击 Service 节点
2. 查看关系视图
3. 看到 Service 选择了 3 个 Pod

### 场景 4: 过滤只看工作负载

1. 切换到过滤器标签
2. 只勾选"工作负载"域
3. 画布只显示 Deployment、ReplicaSet、Pod

### 场景 5: 搜索特定资源

1. 在顶部搜索框输入 "nginx"
2. 所有包含 "nginx" 的资源会被高亮
3. 其他资源变暗

## 提示和技巧

### 性能优化
- 使用过滤器减少显示的节点数量
- 选择合适的布局算法
- 避免频繁切换布局

### 最佳实践
- 使用层次布局查看依赖关系
- 使用力导向布局查看整体结构
- 使用过滤器聚焦特定资源
- 使用搜索快速定位资源

### 快捷操作
- 双击画布空白处适应画布
- 按住 Shift 拖拽多选节点
- 按住 Ctrl 点击多选节点

## 常见问题

### Q: 为什么看不到数据？
A: 应用使用 Mock 数据，启动后会自动加载。如果没有数据，请刷新页面。

### Q: 如何重置视图？
A: 点击底部工具栏的"适应画布"按钮（⊡）。

### Q: 如何清除选择？
A: 点击画布空白处。

### Q: 如何查看更多资源？
A: 当前使用 Mock 数据，只有 10 个节点。集成后端 API 后可以查看真实数据。

### Q: 如何自定义样式？
A: 修改 `src/utils/nodeStyles.ts` 和 `src/utils/edgeStyles.ts` 文件。

## 下一步

### 集成后端 API
1. 修改 `src/services/api.ts` 中的 API 地址
2. 实现真实的数据获取逻辑
3. 移除 Mock 数据

### 添加更多功能
1. 实时更新（WebSocket）
2. 历史记录
3. 多集群切换
4. 更多过滤选项

### 性能优化
1. 虚拟化渲染
2. 数据分页
3. 懒加载

---

**演示时间**: 约 10-15 分钟
**难度**: 简单
**适合人群**: 所有用户

